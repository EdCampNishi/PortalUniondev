
@model IList<UnionDev.Models.Cliente>

@{
    ViewBag.Title = "ConsultaClienteAdmin";
    Layout = "~/Views/Admin/LayoutContaAdmin.cshtml";
}

<div>

    <h3>Clientes</h3>

    <form class="form-horizontal" name="form" id="form" method="POST">

        <div class="form-group">
            <label for="cliente">Cliente</label>
            <input type="text" class="form-control" name="cliente" id="cliente" placeholder="Cliente">
        </div>

        <button class="btn btn-primary" onclick="consultar()">Consultar</button>

        <div class="panel-body">
            <div id="no-more-tables">
                <table class="table table-striped table-bordered table-hover table-condensed cf" id="grindclientes">
                    <thead class="cf">
                        <tr>
                            <th>Razão Social</th>
                            <th>CNPJ</th>
                            <th>Ramo</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Count != 0)
                        {
                            foreach (UnionDev.Models.Cliente cliente in Model)
                            {
                                <tr class="gradeU">
                                    <td data-title="Razão Social">@cliente.RazaoSocial</td>
                                    <td data-title="CNPJ">@cliente.CNPJ</td>
                                    <td data-title="RAMO">@cliente.Ramo</td>
                                    <td data-title="Ação">
                                        <button class="btn btn-primary" onclick="Remover(@cliente.Codigo)">Deletar</button>
                                        <button class="btn btn-primary" onclick="AbrirModal()">Editar</button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>

                </table>
            </div>
        </div>
    </form>



    <div class="modal" id="modal" name="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Editar Cliente</h5>
                    <button class="close" data-dismiss="modal">
                        <span>x</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="razao-social">Razão Social / Nome</label>
                        <input type="text" class="form-control" name="razaosocial" id="razaosocial" placeholder="Razão Social">
                    </div>

                    <div class="form-group">
                        <label for="cnpj">CNPJ</label>
                        <input type="text" class="form-control" name="cnpj" id="cnpj" placeholder="CNPJ">
                    </div>

                    <div class="form-group">
                        <label for="ramo">Ramo de Atividade</label>
                        <input type="text" class="form-control" name="ramo" id="ramo" placeholder="Ramo de Atividade">
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary">Salvar mudanças</button>
                </div>
            </div>
        </div>
    </div>
    



</div>


<script>


    function Remover(cod) {

        $.ajax({
            url: "@Url.Action("RemoverCliente", "Admin")",
            type: "POST",
            datatype: "json",
            data: { codigo: cod },
            success: function () {
                location.reload();
            }
        });

    };


    function Editar(cod) {

        $.ajax({
            url: "@Url.Action("EditarCliente", "Admin")",
            type: "POST",
            datatype: "json",
            data: { codigo: cod },
            success: function () {
                location.reload();
            }
        });
    };

    function AbrirModal() {

        $(modal).modal();
    };

    function consultar(nome) {

    }




</script>